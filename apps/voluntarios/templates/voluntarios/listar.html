{% extends 'base.html' %}
{% block content %}

<div class="container py-5 mt-5 pt-5">
  <h2 class="mb-4">VoluntÃ¡rios Cadastrados</h2>
  <div class="d-flex justify-content-between align-items-center mt-3 mb-3">
    
  </div>
  
  <div class="d-flex justify-content-between align-items-center p-3 bg-light border-bottom">
    <div>
      OlÃ¡, {{ request.user.username }}!
    </div>
    <div>
      <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm">Sair</a>
    </div>
  </div>

  <form method="get" class="row g-3 mb-4">
    <div class="col-md-4">
      <label for="cidade" class="form-label">Filtrar por Cidade:</label>
      <select name="cidade" id="cidade" class="form-select">
        <option value="">Todas</option>
        <option value="SÃ£o JosÃ© dos Campos" {% if cidade_selecionada == "SÃ£o JosÃ© dos Campos" %}selected{% endif %}>SÃ£o JosÃ© dos Campos</option>
        <option value="JacareÃ­" {% if cidade_selecionada == "JacareÃ­" %}selected{% endif %}>JacareÃ­</option>
        <option value="CaÃ§apava" {% if cidade_selecionada == "CaÃ§apava" %}selected{% endif %}>CaÃ§apava</option>
        <option value="TaubatÃ©" {% if cidade_selecionada == "TaubatÃ©" %}selected{% endif %}>TaubatÃ©</option>
      </select>
    </div>
  
    <div class="col-md-4">
      <label for="area" class="form-label">Filtrar por Ãrea:</label>
      <select name="area" id="area" class="form-select">
        <option value="">Todas</option>
        <option value="Feira de adoÃ§Ã£o" {% if area_selecionada == "Feira de adoÃ§Ã£o" %}selected{% endif %}>Feira de adoÃ§Ã£o</option>
        <option value="Cuidados e Bem-Estar" {% if area_selecionada == "Cuidados e Bem-Estar" %}selected{% endif %}>Cuidados e Bem-Estar</option>
        <option value="Outras tarefas" {% if area_selecionada == "Outras tarefas" %}selected{% endif %}>Outras tarefas</option>
      </select>
    </div>
  
    <div class="col-md-4 align-self-end">
      <button type="submit" class="btn btn-primary">Filtrar</button>
      <a href="{% url 'listar_voluntarios' %}" class="btn btn-outline-secondary">Limpar Filtros</a>
    </div>
  </form>  

  {% if voluntarios %}
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Telefone</th>
            <th>EndereÃ§o</th>
            <th>Cidade</th>
            <th>Ãrea</th>
            <th>ID</th>
            <th><a href="{% url 'cadastrar_voluntario' %}" class="btn btn-success btn-sm">â• Novo VoluntÃ¡rio</a></th>
          </tr>
        </thead>
        <tbody>
          {% for v in voluntarios %}
            <tr>
              <td>{{ v.nome }}</td>
              <td>{{ v.email }}</td>
              <td>{{ v.telefone }}</td>
              <td>{{ v.endereco }}</td>
              <td>{{ v.get_cidade_display|default:v.cidade }}</td>
              <td>{{ v.get_area_display|default:v.area }}</td>
              <td>{{ v.id }}</td>
              <td>{% if v.id %}<a href="{% url 'editar_voluntario' v.id %}" class="btn btn-warning btn-sm">âœï¸ Editar</a>{% else %}<span class="text-muted">ID invÃ¡lido</span>{% endif %} <a href="{% url 'excluir_voluntario' v.id %}" class="btn btn-danger btn-sm">ğŸ—‘ï¸ Excluir</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p>Nenhum voluntÃ¡rio cadastrado ainda.</p>
  {% endif %}

  <a href="/" class="btn btn-secondary mt-4">Voltar para o InÃ­cio</a>
</div>
{% endblock %}
