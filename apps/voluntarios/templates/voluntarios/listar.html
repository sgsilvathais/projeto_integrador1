{% extends 'base.html' %}
{% block content %}

<div class="container py-5 mt-5 pt-5">
  <h2 class="mb-4">Volunt√°rios Cadastrados</h2>
  <div class="d-flex justify-content-between align-items-center mt-3 mb-3">
    
  </div>
  
  <div class="d-flex justify-content-between align-items-center p-3 bg-light border-bottom">
    <div>
      Ol√°, {{ request.user.username }}!
    </div>
    <div>
      <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm">Sair</a>
    </div>
  </div>

  <form method="get" class="row g-3 mb-4">
    <div class="col-md-4">
      <label for="cidade" class="form-label">Filtrar por Cidade:</label>
      <select name="cidade" id="cidade" class="form-select">
        <option value="">Todas</option>
        <option value="S√£o Jos√© dos Campos" {% if cidade_selecionada == "S√£o Jos√© dos Campos" %}selected{% endif %}>S√£o Jos√© dos Campos</option>
        <option value="Jacare√≠" {% if cidade_selecionada == "Jacare√≠" %}selected{% endif %}>Jacare√≠</option>
        <option value="Ca√ßapava" {% if cidade_selecionada == "Ca√ßapava" %}selected{% endif %}>Ca√ßapava</option>
        <option value="Taubat√©" {% if cidade_selecionada == "Taubat√©" %}selected{% endif %}>Taubat√©</option>
      </select>
    </div>
  
    <div class="col-md-4">
      <label for="area" class="form-label">Filtrar por √Årea:</label>
      <select name="area" id="area" class="form-select">
        <option value="">Todas</option>
        <option value="Evento de ado√ß√£o" {% if area_selecionada == "Evento de ado√ß√£o" %}selected{% endif %}>Evento de ado√ß√£o</option>
        <option value="Cuidados e Bem-Estar" {% if area_selecionada == "Cuidados e Bem-Estar" %}selected{% endif %}>Cuidados e Bem-Estar</option>
        <option value="Associado" {% if area_selecionada == "Associado" %}selected{% endif %}>Associado</option>
        <option value="Outras tarefas" {% if area_selecionada == "Outras tarefas" %}selected{% endif %}>Outras tarefas</option>
      </select>
    </div>
  
    <div class="col-md-4 align-self-end">
      <button type="submit" class="btn btn-primary">Filtrar</button>
      <a href="{% url 'listar_voluntarios' %}" class="btn btn-outline-secondary">Limpar Filtros</a>
    </div>
  </form>  

  {% if voluntarios %}
    <p><strong>Total de volunt√°rios:</strong> {{ voluntarios_count }}</p>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Telefone</th>
            <th>Endere√ßo</th>
            <th>Cidade</th>
            <th>√Årea</th>
            <th><a href="{% url 'cadastrar_voluntario' %}" class="btn btn-success btn-sm">‚ûï Novo Volunt√°rio</a></th>
          </tr>
        </thead>
        <tbody>
          {% for v in voluntarios %}
            <tr>
              <td>{{ v.nome }}</td>
              <td>{{ v.email }}</td>
              <td>{{ v.telefone }}</td>
              <td>{{ v.endereco }}</td>
              <td>{{ v.get_cidade_display|default:v.cidade }}</td>
              <td>{{ v.get_area_display|default:v.area }}</td>
              <td>{% if v.id %}<a href="{% url 'editar_voluntario' v.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è Editar</a>{% else %}<span class="text-muted">ID inv√°lido</span>{% endif %} <a href="{% url 'excluir_voluntario' v.id %}" class="btn btn-danger btn-sm">üóëÔ∏è Excluir</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p>Nenhum volunt√°rio cadastrado ainda.</p>
  {% endif %}

  <a href="/" class="btn btn-secondary mt-4">Voltar para o In√≠cio</a>
</div>
{% endblock %}
